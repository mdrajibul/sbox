!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery")):"function"==typeof define&&define.amd?define(["exports","jquery"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).SBOX={},t.$)}(this,function(a,t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var d=e(t);a.SearchMethod=void 0,(t=a.SearchMethod||(a.SearchMethod={})).StartWith="StartWith",t.EndWith="EndWith",t.Contains="Contains",a.Size=void 0,(t=a.Size||(a.Size={})).SMALL="small",t.Medium="medium",t.Large="large";function s(o,t,n){return void 0===t&&(t=void 0),void 0===n&&(n=void 0),new Promise(function(e,i){return d.default.ajax({url:o.dataStore.ajax.url,data:o.dataStore.ajax.data,dataType:o.dataStore.ajax.dataType,type:o.dataStore.ajax.type,cache:o.dataStore.ajax.cache,success:function(t){o.dataStore.ajax.success&&"function"==typeof o.dataStore.ajax.success&&o.dataStore.ajax.success(t),e(t)},error:function(t){o.dataStore.ajax.error&&"function"==typeof o.dataStore.ajax.error&&o.dataStore.ajax.error(t),i(t)},beforeSend:function(){t&&t(),o.dataStore.ajax.beforeSend&&"function"==typeof o.dataStore.ajax.beforeSend&&o.dataStore.ajax.beforeSend()},complete:function(){n&&n(),o.dataStore.ajax.complete&&"function"==typeof o.dataStore.ajax.complete&&o.dataStore.ajax.complete()}})})}function h(t,e,i){if(!e||!i)return!1;e=e.toString().trim(),i=i.toString().trim();var o=e.length,n=i.length;return t.searchMethod===a.SearchMethod.StartWith?e.substring(0,n)==i:t.searchMethod===a.SearchMethod.EndWith?e.substring(o-n,o)==i:-1<e.indexOf(i)}function n(o,t){var n,a,e,i,s=void 0;return o.is("select")&&(s={},n=[],o.attr("class")&&(s.cls=o.attr("class")),o.attr("validation")&&(s.validation=o.attr("validation")),o.attr("style")&&(s.style=o.attr("style")),o.attr("id")&&(s.id=o.attr("id")),o.attr("name")&&(s.name=o.attr("name")),o.attr("multiple")&&(s.multiSelect=!0,s.pagination=!0),o.attr("placeholder")&&(s.emptyText=o.attr("placeholder")),a=o.attr("multiple")?[]:"",o.find("option").each(function(){var t=d.default(this),e=d.default.trim(t.html()),i=d.default.trim(t.attr("value")),e={id:i=void 0===i?e:i,name:e};t.is(":selected")&&(o.attr("multiple")&&Array.isArray(a)?a.push(e):a=e),n.push(e)}),""!=a||0<a.length?s.value=a:((e=o.attr("data-value"))&&(e=d.default.trim(e),o.attr("multiple")&&(e=e.split(":::"))),s.value=e||void 0),o.attr("multiple")&&a.length<1&&((i=o.attr("data-id"))&&(i=d.default.trim(i),i=JSON.parse(i),s.value=i||void 0)),0<n.length&&(s.dataStore={json:n}),s&&d.default.extend(s,t),i=d.default("<div/>"),s.id&&(i.attr("id",s.id),s.id=""),s.cls&&(i.attr("class",s.cls),s.cls=""),s.style&&i.attr("style",s.style),o.replaceWith(i)),"object"==typeof(s=s||t)&&(s.selector=i||o),s}function l(t,e,i,o,n){void 0===o&&(o=0),void 0===n&&(n=!1);var a=i.getSelectedId(),i=n&&0<a.length&&""!=a[0]?"":i.getInputText(),i=c(e,t,"name",i);return i=e.pagination?p(i,o,e.itemPerPage):i}function r(t,e,i,o,n){void 0===o&&(o=0),void 0===n&&(n=!1);var a=i.getSelectedId(),i=n&&0<a.length&&""!=a[0]?"":i.getInputText(),i=c(e,t,"",i,!0);return i=e.pagination?p(i,o,e.itemPerPage):i}var t={mozilla:/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase()),version:Number(navigator.appVersion)},c=function(t,e,i,o,n,a,s){void 0===n&&(n=!1),void 0===a&&(a=!1),void 0===s&&(s=!1),o=o&&o.toString().toLowerCase();var l=[],r=void 0;if(n&&a&&2==e.length)r=(s?e[0]:e[1]).toString().toLowerCase(),(o&&(s?r==o:h(t,r,o))||!o)&&l.push({id:e[0],name:e[1]});else for(var p in e)n&&(i=p),e.hasOwnProperty(p)&&(r=e[i]?e[i].toString().toLowerCase():"","object"==typeof e[p]?l=l.concat(c(t,e[p],i,o,n,!0,s)):(o&&(s?r==o:h(t,r,o))||!o)&&(n||p!=i?n&&l.push(e[i]):l.push(e)));return l},p=function(t,e,i){if(t.length<1)return[];for(var o=[],n=e;n<e+i;n++)t[n]&&o.push(t[n]);return o},i=(o.prototype.getExistName=function(t,e){e=c(this.options,t,"id",e,!1,null,!0);return e&&e.length?e[0].name:""},o.prototype.getData=function(){return{data:this.dataObject,total:this.totalData}},o.prototype.setDefaultAjaxValue=function(e){var i=this;this.dataObject?(this.template.multipleSelectedCell(this.id,this.name,e||!1,this.image),e&&(this.template.setInputValue(this.name,this.image),this.template.setColorInputValue(this.name,this.color))):d.default.ajax({url:this.options.dataStore.ajax.url,data:this.options.dataStore.ajax.data,dataType:this.options.dataStore.ajax.dataType,type:this.options.dataStore.ajax.type,cache:this.options.dataStore.ajax.cache,success:function(t){t&&(i.dataObject=t.data,i.totalData=t.total,i.name=i.getExistName(i.dataObject,i.id),i.template.multipleSelectedCell(i.id,i.name,e||!1,i.image),e&&(i.template.setInputValue(i.name,i.image),i.template.setColorInputValue(i.name,i.color)))}})},o.prototype.setDefaultValueProps=function(t){"object"==typeof t?(t.id&&(this.id=t.id),t.name?this.name=t.name:this.id&&(this.options.dataStore.arrayList?this.name=c(this.options,this.options.dataStore.arrayList,"",t.id,!0,null,!0):this.options.dataStore.json&&(this.name=this.getExistName(this.options.dataStore.json,t.id))),this.name&&!this.id&&(this.id=this.name),t.image&&(this.image='<img src="'+t.image+'" title="'+this.name+'" alt="'+this.name+'"/>'),t.color&&(this.color='<div style="background-color: '+t.color+'"></div>')):(this.id=t,this.options.dataStore.arrayList?this.name=c(this.options,this.options.dataStore.arrayList,"",this.id,!0,null,!0):this.options.dataStore.json&&(this.name=this.getExistName(this.options.dataStore.json,this.id)),this.name||(this.name=t),"object"==typeof this.name&&0<this.name.length&&(this.name=this.name[0],this.name.name&&(this.name=this.name.name)))},o.prototype.set=function(t){if(t)this.template.inputEl.html(this.template.emptyTextPanel),this.template.selectedItemContainer.empty();else if(this.options.value&&Array.isArray(this.options.value)||this.options.multiSelect&&"object"==typeof this.options.value)for(var e in this.options.value)this.setDefaultValueProps(this.options.value[e]),this.id&&!this.name&&this.options.dataStore.ajax.url?this.setDefaultAjaxValue(!1):this.template.multipleSelectedCell(this.id,this.name,!1,this.image);else this.options.value&&!d.default.isArray(this.options.value)?(this.setDefaultValueProps(this.options.value),this.id&&!this.name&&this.options.dataStore.ajax.url?this.setDefaultAjaxValue(!0):(this.template.multipleSelectedCell(this.id,this.name,!0,this.image),this.template.setInputValue(this.name,this.image),this.template.setColorInputValue(this.name,this.color))):(this.template.inputEl.html(this.template.emptyTextPanel),this.template.selectedItemContainer.empty().append(this.template.getHiddenInput("")).hide())},o);function o(t,e,i){this.options=t,this.template=e,this.dataObject=i}var u=(m.prototype.setPaginationProperty=function(t){var e;void 0===t&&(t=void 0),this.options.pagination&&(this.options.dataStore.ajax.data.offset=this.lastFetchDataNo,this.options.dataStore.ajax.data.limit=this.options.itemPerPage),this.options.typeHeader&&(e=this.template.getInputText(),this.options.dataStore.ajax.data.q=!t&&this.options.typeHeader&&e!=this.currentValue?this.template.getInputText():"")},m.prototype.clickEventBind=function(t){void 0===t&&(t=!1);var e=!1;this.options.dataCache&&(!this.options.dataCache||this.dataObject)||(this.options.dataStore.json||this.options.dataStore.arrayList?(this.dataObject=this.options.dataStore.json||this.options.dataStore.arrayList,this.totalData=this.options.dataStore.json.length||this.options.dataStore.arrayList.length):this.options.dataStore.ajax&&this.options.dataStore.ajax.url&&(this.setPaginationProperty(e=!0),this.doAjax(!0,!0,!0)),e||(0<(e=(this.options.dataStore.json||this.isNoAjaxFetch?l:r)(this.dataObject,this.options,this.template,this.lastFetchDataNo,!0)).length?this.template.prepareItem(e):this.template.itemContainerEl.html('<div class="w2l-sbox-itemDataContainer"><div class="w2l-sbox-nameCell">No data</div></div>'))),t||(this.template.sBoxEl.hasClass("w2l-box-active")?this.template.hidePanel():this.template.showPanel()),this.template.focusSBox()},m.prototype.cellBind=function(t){var e,i,o=t.data("dataId"),n=d.default.trim(t.find(".w2l-sbox-nameCell").text());0<t.find(".w2l-sbox-imageCell").length&&(e=t.find(".w2l-sbox-imageCell").html()),0<t.find(".w2l-sbox-colorCell").length&&(i=t.find(".w2l-sbox-colorCell").html()),t.hasClass("w2l-sbox-selected")?(t.removeClass("w2l-sbox-selected"),this.options.multiSelect&&this.options.checkboxSelection&&t.find("input[type=checkbox]").removeAttr("checked"),this.template.selectedItemContainer.find("input[value='"+o+"']").parent().remove()):this.options.multiSelect?(t.addClass("w2l-sbox-selected"),this.template.multipleSelectedCell(o,n,!1,e),this.options.multiSelect&&this.options.checkboxSelection&&t.find("input[type=checkbox]").attr("checked","true")):(this.template.itemContainerEl.find(".w2l-sbox-selected").removeClass("w2l-sbox-selected"),t.addClass("w2l-sbox-selected"),this.template.setInputValue(n,e),i&&this.template.setColorInputValue(n,i),this.template.multipleSelectedCell(o,"",!0,e),this.template.hidePanel()),this.options.listners.onSelect&&"function"==typeof this.options.listners.onSelect&&this.options.listners.onSelect(t,t.data("cellData"),this.template.selectedItemContainer.find("input[value='"+o+"']"))},m.prototype.bindKeyEvent=function(){var r=this;this.template.sBoxEl.on("keydown",function(t){var e,i,o,n,a=r.template.itemContainerEl,s=t.key,l=a.find(".w2l-sbox-hover:last");"ArrowDown"!==s&&"ArrowUp"!==s&&"Enter"!==s||("ArrowDown"===s?(o=l.removeClass("w2l-sbox-hover").next(),(0<l.length&&0<o.length?o:a.find(".w2l-sbox-cell:first")).addClass("w2l-sbox-hover")):"ArrowUp"===s?(0<(n=l.removeClass("w2l-sbox-hover").prev()).length?n:a.find(".w2l-sbox-cell:last")).addClass("w2l-sbox-hover"):"Enter"===s&&(e=void 0,r.options.multiSelect&&r.options.checkboxSelection?(o=(i=a.find(".w2l-sbox-hover:last"))?i.data("dataId"):"",i.hasClass("w2l-sbox-selected")?(i.removeClass("w2l-sbox-selected"),r.options.multiSelect&&r.options.checkboxSelection&&i.find("input[type=checkbox]").removeAttr("checked"),r.template.selectedItemContainer.find("input[value='"+o+"']").parent().remove()):(i.addClass("w2l-sbox-selected"),i.find("input[type=checkbox]").attr("checked","true"),l=i.find(".w2l-sbox-nameCell").text(),n=void 0,0<(s=i.find(".w2l-sbox-imageCell")).length&&(n=s.html()),r.template.multipleSelectedCell(o,l,!1,n)),e=i):(e=a.find(".w2l-sbox-hover:last"),r.currentValue=d.default.trim(e.find(".w2l-sbox-nameCell").text()),r.template.inputEl.empty().text(r.currentValue),r.template.selectedItemContainer.empty().append(r.template.getHiddenInput(e.data("dataId"))).hide(),a.slideUp(200)),r.options.listners.onSelect&&"function"==typeof r.options.listners.onSelect&&(a=e.data("dataId"),r.options.listners.onSelect(e,e.data("cellData"),r.template.selectedItemContainer.find("input[value='"+a+"']")))),t.preventDefault())})},m.prototype.dataFetch=function(){var o,n=this,a=this.template.getSelector();this.options.typeHeader&&(o=!0,this.template.inputEl.on("keyup.sbox",function(t){var e,i=d.default(n),t=t.key;"ArrowDown"!==t&&"ArrowUp"!==t&&"Enter"!==t&&(n.options.dataStore.json||n.options.dataStore.arrayList||n.isNoAjaxFetch?(e=(n.options.dataStore.json||n.isNoAjaxFetch?l:r)(n.dataObject,n.options,n.template),o&&(o=!1,setTimeout(function(){n.options.listners.onSearch&&"function"==typeof n.options.listners.onSearch&&n.options.listners.onSearch(n.template.getInputText(),e,n.template.inputEl),0<e.length?(n.template.prepareItem(e),n.template.itemContainerEl.slideDown(200)):n.template.itemContainerEl.slideUp(200),o=!0},200))):n.isNoAjaxFetch||(n.lastFetchDataNo=0,o&&(o=!1,setTimeout(function(){n.setPaginationProperty(),n.doAjax(!0,!1),o=!0},800)))),n.options.inputMode&&a.find("input[type=hidden]").val(d.default.trim(i.text()))})),this.template.selectorEl.on(this.options.expandEvent,function(t){(0<d.default(t.target).parents(".w2l-sbox-comboPanel").length||d.default(t.target).hasClass("w2l-sbox-comboPanel"))&&(n.clickEventCounter<1?n.clickEventBind():n.clickEventCounter=0)}),this.options.collapseEvent&&-1<d.default.inArray(this.options.expandEvent,["mouseover","hover"])&&d.default(document).on(this.options.collapseEvent,function(t){d.default(t.target).parents(".w2l-sbox").length<1&&n.template.hidePanel()})},m.prototype.submitBtnEvent=function(){var t=this;this.template.doneBtn.on("click.sbox",function(){t.template.itemContainerEl.slideUp(200),t.template.sBoxEl.removeClass("w2l-box-active"),t.options.listners.onSubmit&&"function"==typeof t.options.listners.onSubmit&&t.options.listners.onSubmit(t.template.doneBtn,t.template.getSelectedId())})},m.prototype.resetBtnEvent=function(){var t=this;this.template.resetBtn.on("click.sbox",function(){t.resetDataStore(),t.resetDefault.set(!0),t.clickEventBind(!0)})},m.prototype.reloadBtnEvent=function(){var t=this;this.template.reloadBtn.on("click.sbox",function(){t.setPaginationProperty(),t.doAjax(!0)})},m.prototype.nextBtnEvent=function(){var t=this;this.template.nextBtn.on("click.sbox",function(){t.lastFetchDataNo+=t.options.itemPerPage,t.rePopulateData()})},m.prototype.prevBtnEvent=function(){var t=this;this.template.prevBtn.on("click.sbox",function(){t.lastFetchDataNo-=t.options.itemPerPage,t.rePopulateData()})},m.prototype.doAjax=function(e,i,o){var n=this;void 0===i&&(i=void 0),void 0===o&&(o=!1),s(this.options,function(){o&&n.template.prepareItem("loading"),n.template.prepareLoaderContainer(),n.template.itemContainerEl.find(".w2l-sbox-itemDataContainer").append(n.template.loaderEl)},function(){n.template.loaderEl&&n.template.loaderEl.remove()}).then(function(t){t&&(n.dataObject=t.data,n.totalData=Number(t.total),e?i?(n.options.listners.onSearch&&"function"==typeof n.options.listners.onSearch&&n.options.listners.onSearch(n.options.dataStore.ajax.data.q,n.dataObject,n.template.inputEl),0<n.dataObject.length&&n.rePopulateData(),n.template.showPanel(o)):(n.rePopulateData(),n.template.itemContainerEl.slideDown(50,function(){n.clickEventCounter=0})):n.dataFetch(),n.template.focusSBox())})},m.prototype.resetDataStore=function(){this.tempDataStore&&(this.options.dataStore=this.tempDataStore)},m.prototype.rePopulateData=function(){var t;this.options.dataStore.json||this.options.dataStore.arrayList||this.isNoAjaxFetch?((t=p(this.dataObject,this.lastFetchDataNo,this.options.itemPerPage))&&0<t.length&&this.template.prepareItem(t),this.template.focusSBox()):this.isNoAjaxFetch||(this.setPaginationProperty(),this.doAjax(!0))},Object.defineProperty(m.prototype,"isNoAjaxFetch",{get:function(){return this.options.dataStore.ajax.url&&this.dataObject&&(this.dataObject.length===this.totalData||0===this.totalData)},enumerable:!0,configurable:!0}),m);function m(t,e){this.lastFetchDataNo=0,this.clickEventCounter=0,this.totalData=0,this.options=t,this.template=e,this.tempDataStore=this.options.dataStore,this.resetDefault=new i(this.options,this.template,null)}var f=(x.prototype.setEventObject=function(t){this.events=t},x.prototype.getSelector=function(){return d.default(this.options.selector)},x.prototype.getSBOxId=function(){return this.options.id||"w2l-sbox-"+(d.default(".w2l-sbox").length+1)},x.prototype.getSelectedId=function(){var i=[];return this.selectedItemContainer.find("input[type=hidden]").each(function(t){var e=d.default(this).val();!e&&""!=e||i.push(e)}),i},x.prototype.getSelectedName=function(){var t=d.default.trim(this.inputEl.text());return t!=this.options.emptyText?t:""},x.prototype.getInputText=function(){var t=d.default.trim(this.inputEl.text());return t==this.options.emptyText?"":t},x.prototype.prepareLoaderContainer=function(){this.loaderEl=d.default("<div/>"),this.loaderEl.addClass("w2l-sbox-loader")},x.prototype.prepareHTML=function(){this.options.emptyText&&(this.emptyTextPanel='<span class="placeholder">'+this.options.emptyText+"</span>");var t=this.getSelector();t.empty(),t.removeData("sbox");var e=this.options.width||t.outerWidth()+"px";this.sBoxEl=d.default("<div/>"),this.sBoxEl.addClass("w2l-sbox"),this.sBoxEl.addClass("w2l-sbox-"+this.options.size),this.options.cls&&this.sBoxEl.addClass(this.options.cls),this.options.style&&this.sBoxEl.attr("style",this.options.style);var i=this.getSBOxId();this.sBoxEl.attr("id",i),this.options.width&&this.sBoxEl.css("width",parseInt(this.options.width,10)),this.selectorEl=d.default("<div/>"),this.selectorEl.addClass("w2l-sbox-comboPanel"),this.selectorEl.attr("tabindex",this.options.tabindex),this.handlerEl=d.default("<div/>"),this.handlerEl.attr("class","w2l-sbox-comboPanelHandler w2l-sbox-inb"),this.options.height&&this.handlerEl.css("height",parseInt(this.options.height,10)),this.inputEl=d.default("<div/>"),this.options.typeHeader&&this.inputEl.attr("contenteditable","true"),this.options.height&&this.inputEl.css({height:parseInt(this.options.height,10),lineHeight:parseInt(this.options.height,10)-6+"px"}),this.inputEl.attr("class","w2l-sbox-input w2l-sbox-inb"),this.options.autoWidth||this.inputEl.css({width:e}),this.inputEl.html(this.emptyTextPanel),this.inputEl.attr("title",this.options.emptyText),this.selectorEl.append(this.inputEl),this.selectorEl.append(this.handlerEl),this.sBoxEl.append(this.selectorEl),this.itemContainerEl=d.default("<div/>"),this.itemContainerEl.addClass("w2l-sbox-itemContainer").hide(),this.options.width&&!this.options.optionAutoWidth?this.itemContainerEl.css("width",Number(this.options.width)-2):this.options.width&&this.options.optionAutoWidth&&this.itemContainerEl.css("minWidth",Number(this.options.width)-2),this.sBoxEl.append(this.itemContainerEl),this.selectedItemContainer=d.default("<div/>"),this.selectedItemContainer.addClass("w2l-sbox-selectedItemContainer").hide(),this.sBoxEl.append(this.selectedItemContainer),t.append(this.sBoxEl)},x.prototype.generateButton=function(t,e){var i=d.default("<button/>");return i.addClass(t),i.attr("type","button"),i.html(e),i},x.prototype.preparePagination=function(){this.paginationContainer=d.default("<div/>"),this.paginationContainer.addClass("w2l-sbox-paginationContainer"),this.options.multiSelect&&(this.doneBtn=this.generateButton("w2l-sbox-doneBtn",this.options.btnText),this.paginationContainer.empty().append(this.doneBtn),this.events.submitBtnEvent()),this.options.hasResetButton&&(this.resetBtn=this.generateButton("w2l-sbox-resetBtn",this.options.resetButtonText),this.paginationContainer.append(this.resetBtn),this.events.resetBtnEvent()),this.options.hasReloadButton&&this.options.dataStore.ajax.url&&(this.reloadBtn=this.generateButton("w2l-sbox-reloadBtn",this.options.reloadButtonText),this.paginationContainer.append(this.reloadBtn),this.events.reloadBtnEvent()),this.options.pagination&&this.events.totalData>this.options.itemPerPage?(this.nextBtn=this.generateButton("w2l-sbox-nextBtn",""),this.nextBtn.attr("title",this.options.nextBtnText),this.events.lastFetchDataNo+this.options.itemPerPage>=this.events.totalData?(this.nextBtn.attr("disabled","true"),this.nextBtn.off("click.sbox")):this.events.nextBtnEvent(),this.prevBtn=this.generateButton("w2l-sbox-prevBtn",""),this.prevBtn.attr("title",this.options.prevBtnText),this.events.lastFetchDataNo<1?(this.prevBtn.attr("disabled","true"),this.prevBtn.off("click.sbox")):this.events.prevBtnEvent(),this.paginationContainer.append(this.prevBtn).append(this.nextBtn)):this.options.multiSelect?(this.doneBtn.css({float:"none"}),this.paginationContainer.css({textAlign:"left"})):(this.options.hasResetButton||this.options.hasReloadButton)&&(this.options.hasResetButton||!this.options.hasReloadButton||this.options.dataStore.ajax.url)||(this.paginationContainer=null),null!=this.paginationContainer&&this.paginationContainer.append('<div style="clear:both"></div>')},x.prototype.showPanel=function(t){var e=this;void 0===t&&(t=!1),this.clickEventCounter=1,this.itemContainerEl.is(":hidden")||t?this.itemContainerEl.slideDown(200,function(){e.clickEventCounter=0,e.sBoxEl.removeClass("w2l-box-active").addClass("w2l-box-active")}):this.options.toggleHide&&-1==d.default.inArray(this.options.expandEvent,["mouseover","hover"])&&this.hidePanel()},x.prototype.hidePanel=function(){var t=this;this.itemContainerEl.slideUp(200,function(){t.clickEventCounter=0,t.sBoxEl.removeClass("w2l-box-active"),(t.options.multiSelect||""===t.getInputText()&&t.inputEl.find(".w2l-sbox-colorCell").length<1)&&t.inputEl.html(t.emptyTextPanel)})},x.prototype.focusSBox=function(){this.options.typeHeader?this.inputEl.trigger("focus"):(this.itemContainerEl.find(".w2l-sbox-cell:first").addClass("w2l-sbox-hover").prepend("<a href='#' class='tempFocus'></a> "),this.itemContainerEl.find(".tempFocus").trigger("focus")),this.hideOtherSBOX(this.inputEl.closest(".w2l-sbox"))},x.prototype.hideOtherSBOX=function(t){d.default(".w2l-sbox").removeClass("w2l-box-active"),t.addClass("w2l-box-active"),d.default(".w2l-sbox:not(.w2l-box-active)").find(".w2l-sbox-itemContainer").hide()},x.prototype.getSubCell=function(t){void 0===t&&(t="");var e=d.default("<div/>");return t&&e.attr("class",t),e},x.prototype.prepareCell=function(t){var e=this;if(!t)throw"No Data Yet";var i,o,n,a,s=null;"object"==typeof t?(!t.id&&""!=t.name||(i=t.id),!t.name&&""!=t.name||(o=t.name),t.image&&(n=t.image),t.color&&(a=t.color),t.tip&&(s=d.default.trim(t.tip)),t.id||t.name||t.image||2!=t.length||(i=d.default.trim(t[0]),o=d.default.trim(t[1]))):(i=d.default.trim(t),o=d.default.trim(t));var l,r,p=d.default("<div/>");p.attr("class","w2l-sbox-cell"),p.data("dataId",i),p.data("cellData",t),this.options.showCellTitle&&p.attr("title",s||o),this.options.multiSelect&&this.options.checkboxSelection&&(l=this.getSubCell(),(s=d.default("<input/>")).attr("type","checkbox"),s.val(i),l.append(s),p.append(l)),n&&((r=this.getSubCell()).addClass("w2l-sbox-imageCell"),(l=d.default("<img/>")).attr("src",n),o&&(l.attr("alt",o),l.attr("title",o)),r.append(l),p.append(r)),a&&((h=this.getSubCell()).addClass("w2l-sbox-colorCell"),(r=d.default("<div/>")).css("backgroundColor",a),h.append(r),p.append(h));var h=this.getSubCell();h.addClass("w2l-sbox-nameCell"),o&&h.html(o),p.append(h),this.options.multiSelect||this.options.checkboxSelection||n||h.css("display","block");h=this.getSelectedId();return 0<h.length&&i&&-1<d.default.inArray(i.toString(),h)&&(p.addClass("w2l-sbox-selected"),this.options.multiSelect&&this.options.checkboxSelection&&p.find("input[type=checkbox]").attr("checked","true")),this.options.isListReadonly||(p.on("click.sbox",function(t){e.itemClickEventCounter<1&&(e.itemClickEventCounter++,e.cellBind(p),setTimeout(function(){e.itemClickEventCounter=0},600)),t.stopPropagation()}),this.options.multiSelect&&this.options.checkboxSelection&&p.find("input[type=checkbox]").on("click.sbox",function(t){e.itemClickEventCounter<1&&(e.itemClickEventCounter++,e.cellBind(p),setTimeout(function(){e.itemClickEventCounter=0},600))})),this.options.isListReadonly&&p.css({cursor:"text"}),p.on("mouseover",function(t){p.addClass("w2l-sbox-hover")}),p.on("mouseout",function(t){p.removeClass("w2l-sbox-hover")}),p},x.prototype.getHiddenInput=function(t){var e=d.default("<input/>");return e.attr("name",this.options.name||this.getSelector().attr("id")),e.attr("type","hidden"),t?e.val(t):e.addClass("w2l-sbox-inpInit"),this.options.inputCls&&e.addClass(this.options.inputCls),this.options.validation&&(e.attr("validation",this.options.validation),e.addClass("sbox-combo"),this.sBoxEl.find(".w2l-sbox-comboPanel").hasClass("error")&&e.addClass("error")),e},x.prototype.prepareItem=function(t){var e=this;if(t||"loading"==t){var i=d.default("<div/>");if(i.addClass("w2l-sbox-itemDataContainer"),this.options.noSelection&&i.append(this.prepareCell({id:this.options.noSelectionValue,name:this.options.noSelection})),"loading"!=t)for(var o=0;o<t.length;o++)i.append(this.prepareCell(t[o]));else this.itemContainerEl.show();this.itemContainerEl.find(".w2l-sbox-itemDataContainer").hide(),this.itemContainerEl.find(".w2l-sbox-paginationContainer").hide(),setTimeout(function(){e.itemContainerEl.find(".w2l-sbox-itemDataContainer").not(".w2l-sbox-itemDataContainer:last").remove(),e.itemContainerEl.find(".w2l-sbox-paginationContainer").not(".w2l-sbox-paginationContainer:last").remove()},100),this.itemContainerEl.append(i),(this.options.pagination||this.options.multiSelect)&&(this.preparePagination(),this.itemContainerEl.append(this.paginationContainer))}},x.prototype.multipleSelectedCell=function(i,t,e,o){var n,a,s,l=this;this.selectedItemContainer.find("input[value='"+i+"']").length<1&&((n=this.getSubCell("w2l-sbox-selectedCell")).data("dataId",i),e||(o&&((s=this.getSubCell("w2l-sbox-selectedCellItem")).html(o),n.append(s)),(s=this.getSubCell("w2l-sbox-selectedCellItem")).text(t),n.append(s),(a=this.getSubCell("w2l-sbox-selectedCellItem")).addClass("w2l-sbox-remove"),n.append(a)),n.append(this.getHiddenInput(i)),a&&a.on("click.sbox",function(t){var e=l.getSelectedId();0<e.length&&i&&-1<d.default.inArray(i.toString(),e)&&((e=l.sBoxEl.find(".w2l-sbox-selected").filter(function(t,e){return d.default(e).data("dataId")===i}))&&(e.removeClass("w2l-sbox-selected"),l.options.multiSelect&&l.options.checkboxSelection&&e.find("input[type=checkbox]").removeAttr("checked"),l.options.listners.onSelect&&"function"==typeof l.options.listners.onSelect&&l.options.listners.onSelect(e,"",null))),a.parents(".w2l-sbox-selectedCell").remove(),l.selectedItemContainer.find(".w2l-sbox-selectedCell").length<1&&l.selectedItemContainer.empty().append(l.getHiddenInput("")).hide(),l.options.listners.onRemove&&"function"==typeof l.options.listners.onRemove&&l.options.listners.onRemove(a,l.sBoxEl,l),t.stopPropagation()}),e?this.selectedItemContainer.empty().append(n).hide():(0<this.selectedItemContainer.find(".w2l-sbox-selectedCell").length?(this.selectedItemContainer.find(".w2l-sbox-inpInit").remove(),this.selectedItemContainer.find(".errorlist").remove()):this.selectedItemContainer.empty(),this.selectedItemContainer.append(n).show()),this.options.multiSelect&&(this.options.showSelectedPanel?this.selectedItemContainer.show():this.selectedItemContainer.hide()))},x.prototype.cellBind=function(t){var e,i,o=t.data("dataId"),n=d.default.trim(t.find(".w2l-sbox-nameCell").text());0<t.find(".w2l-sbox-imageCell").length&&(e=t.find(".w2l-sbox-imageCell").html()),0<t.find(".w2l-sbox-colorCell").length&&(i=t.find(".w2l-sbox-colorCell").html()),t.hasClass("w2l-sbox-selected")?(t.removeClass("w2l-sbox-selected"),this.options.multiSelect&&this.options.checkboxSelection&&t.find("input[type=checkbox]").removeAttr("checked"),this.selectedItemContainer.find("input[value='"+o+"']").parent().remove()):(this.options.multiSelect?(this.multipleSelectedCell(o,n,!1,e),this.options.multiSelect&&this.options.checkboxSelection&&t.find("input[type=checkbox]").attr("checked","true")):(this.itemContainerEl.find(".w2l-sbox-selected").removeClass("w2l-sbox-selected"),this.setInputValue(n,e),i&&this.setColorInputValue(n,i),this.multipleSelectedCell(o,"",!0,e),this.hidePanel()),t.addClass("w2l-sbox-selected")),this.options.listners.onSelect&&"function"==typeof this.options.listners.onSelect&&this.options.listners.onSelect(t,t.data("cellData"),this.selectedItemContainer.find("input[value='"+o+"']"))},x.prototype.setInputValue=function(t,e){var i="";"."==(t=(t=d.default.trim(t)).replace(/&nbsp;/g,"")).substring(0,1)&&(t=t.replace(/\./g,""));t=e?'<div class="w2l-sbox-imageCell">'+e+'</div><div class="w2l-sbox-nameCell">'+t||"</div>":t;return this.options.multiSelect||this.options.noTitleValue||(i=d.default("<p>"+t+"</p>").text(),this.inputEl.html(t)),i},x.prototype.setColorInputValue=function(t,e){var i="";"."==(t=(t=d.default.trim(t)).replace(/&nbsp;/g,"")).substring(0,1)&&(t=t.replace(/\./g,""));t=e?'<div class="w2l-sbox-colorCell">'+e+'</div><div class="w2l-sbox-nameCell">'+t||"</div>":t;return this.options.noTitleValue||(i=d.default("<p>"+t+"</p>").text(),this.inputEl.html(t)),i},x);function x(t){this.clickEventCounter=0,this.itemClickEventCounter=0,this.options=t}var v=(b.prototype.init=function(){var i=this;this.template.prepareHTML(),this.resetDefault.set(!1),this.events.dataFetch(),this.options.typeHeader&&this.template.inputEl.on("focus.sbox",function(t){var e=d.default(i);e.text()==i.options.emptyText&&e.empty()}),this.options.isListReadonly||this.events.bindKeyEvent(),d.default(document).on("click.w2lSbox",function(t){t=d.default(t.target);t.parents(".w2l-sbox-comboPanel").length<1&&t.parents(".w2l-sbox-itemDataContainer").length<1&&t.parents(".w2l-sbox-paginationContainer").length<1?(!i.options.multiSelect&&i.template.inputEl.find(".w2l-sbox-colorCell").length<1&&""==i.template.getInputText()&&i.template.selectedItemContainer.find("input[type=hidden]").val(""),i.template.hidePanel()):i.template.hideOtherSBOX(t.closest(".w2l-sbox"))}),this.options.resizeOnLoad&&d.default(window).on("resize.sbox",function(){i.init()})},b.prototype.resetValue=function(t){this.resetDefault.set(t)},b.prototype.getValue=function(){var t=this.template.getSelectedId();return"object"!=typeof t||1<t.length?t:t[0]},b.prototype.setValue=function(e,t){this.template.selectedItemContainer.find("input[type=hidden]").each(function(t){t.val(e)}),this.template.inputEl.text(t||e)},b.prototype.getSelectedName=function(){return this.template.getSelectedName()},b.prototype.setDataStore=function(t){this.events.tempDataStore||(this.events.tempDataStore=this.options.dataStore),this.options.dataStore=t},b.prototype.getDataStore=function(){return this.options.dataStore},b.prototype.resetDataStore=function(){this.events.resetDataStore()},Object.defineProperty(b.prototype,"params",{get:function(){return{id:this.options.id,name:this.options.name,cls:this.options.cls,value:this.options.value,inputCls:this.options.inputCls}},enumerable:!0,configurable:!0}),b);function b(t){this.options={multiSelect:!1,checkboxSelection:!0,size:a.Size.Medium,pagination:!0,selector:null,tabindex:0,name:"",id:"",style:"",noSelection:null,noSelectionValue:"",value:void 0,noTitleValue:!1,showCellTitle:!0,validation:null,typeHeader:!0,searchMethod:a.SearchMethod.Contains,inputMode:!1,isListReadonly:!1,itemPerPage:20,width:null,autoWidth:!0,optionAutoWidth:!1,height:null,nextBtnText:"Next",prevBtnText:"Previous",btnText:"OK",hasResetButton:!1,resetButtonText:"Reset",hasReloadButton:!1,reloadButtonText:"Reload",cls:null,resizeOnLoad:!1,showSelectedPanel:!0,toggleHide:!1,inputCls:null,emptyText:"Type..",dataCache:!0,expandEvent:"click.sbox",collapseEvent:"click.sbox",dataStore:{ajax:{url:null,data:{},dataType:"json",type:"get",cache:!1,success:void 0,error:void 0,beforeSend:void 0,complete:void 0},json:void 0,arrayList:void 0},listners:{onSelect:void 0,onSubmit:void 0,onRemove:void 0,onSearch:void 0}},(t=n(d.default(t.selector),t))&&d.default.extend(!0,this.options,t),this.template=new f(this.options),this.events=new u(this.options,this.template),this.template.setEventObject(this.events),this.resetDefault=new i(this.options,this.template,null),this.init()}d.default(function(){d.default.fn.Sbox=function(i){var o=this;return this.each(function(){var t=d.default(o),e=n(t,i);if("object"==typeof e){t=new v(e);return d.default(e.selector).data("sbox",t),t}d.default.error("Configuration not found")})}}),a.Browser=t,a.Sbox=v,a.SboxEvents=u,a.SboxTemplate=f,a.getArrayData=r,a.getArrayElements=p,a.getJsonData=l,a.getObjects=c,a.hasSearchString=h,a.populateSboxOptions=n,a.sbAjax=s,Object.defineProperty(a,"__esModule",{value:!0})});